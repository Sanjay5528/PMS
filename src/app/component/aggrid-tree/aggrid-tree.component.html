
<!-- <ng-template #editViewPopup>
  <mat-card>
    <mat-card-header style="flex: 1 1 auto;">
      <div style="width: 100%">
        <h2 style="text-align: center;" class="page-title">{{ pageHeading }}</h2>
      </div>
      <div style="text-align-last: end" >
        <mat-icon mat-dialog-close>close</mat-icon>
      </div>
    </mat-card-header>
    <mat-card-content style="padding-top: 10px">
      <form [formGroup]="form">
        <formly-form [model]="selectedModel" [fields]="fields" [form]="form"></formly-form>
      
      </form>
    </mat-card-content>
    <mat-card-actions>
      <div style="text-align-last: end; width: 100%">
        <button style="margin: 5px" mat-button mat-dialog-close>
          Cancel
        </button>
        <button style="margin: 5px" mat-button (click)="resetBtn('reset')" *ngIf="this.id" >
          Reset
        </button>
        <button
        style="margin: 5px; background: rgb(59, 146, 155)"
        (click)="saveForm(config,$event)"
        mat-raised-button
        color="warn"
       
      >
        save
      </button>
      

      </div>
    </mat-card-actions>
  </mat-card>
</ng-template> -->

<!-- ! an do requriement here 1st task -->
<mat-drawer-container class="example-container" [hasBackdrop]="true">
  <mat-drawer #drawer mode="over" position="end" class="example-sidenav" >

   
    <span *ngIf="cellClicked" style="font-size: larger;font-style: italic;margin-left: 20px;">{{selectedRows.index}} </span>
    <!-- <h4>Test Case</h4> -->
    <br>
    <span *ngIf="cellClicked" style="font-size: small;font-style: normal;margin-left: 20px;"> {{cellClicked=='number_of_TestCase_count'? "Test Case":"Task" }} <span style="font-size: small;border-radius: 50%;"> {{ cellClicked=='number_of_TestCase_count'? selectedRows.number_of_TestCase_count:selectedRows.number_of_Task_count}} </span> </span>
  
    <div *ngIf="cellClicked=='number_of_TestCase_count'" style="margin-left: 25px;">
    
        <div *ngFor="let testCase of this.selectedRows?.tasecaseresult" class="mat-card-container" style="margin-bottom: 5px;">
          <mat-card class="mat-card">
            <mat-card-header>
              <mat-card-title style="margin-top: 5px;">
                
                <span style="font-size: large;font-weight: bold;">{{ testCase.test_case_name }}</span>                <span [ngStyle]="{'background-color': testCase?.test_case_scenario === 'P' ? 'green' : 'red', 'width': '10px', 'height': '10px', 'border-radius': '50%', 'display': 'inline-block', 'margin-right': '5px','margin-left':'5px'}"></span>

                 <!-- <span style="font-size: medium;">  ( {{testCase.test_case_scenario}} )  </span>  -->
              </mat-card-title>
              <!-- <mat-card-subtitle>{{  }}</mat-card-subtitle> -->
            </mat-card-header>
            <mat-card-content style="margin-left: 30px;">
              <!-- <p>{{  }}</p> -->
              <p [innerHTML]="testCase.expected_result"></p>
              <!-- <p>{{ testCase.test_data }}</p> -->
            </mat-card-content>
            <mat-card-actions>
              <!-- Add actions if needed -->
            </mat-card-actions>
          </mat-card>
        </div>
      </div>
  

    <div *ngIf="cellClicked=='number_of_Task_count'" style="margin-left: 25px;">
      <div  class="keep-scrolling">
    
        <div *ngFor="let testCase of this.selectedRows?.taskresult" class="mat-card-container" style="margin-bottom: 5px;">
          <mat-card class="mat-card">
            <mat-card-header>
              <mat-card-title style="margin-top: 5px;">
                <span style="font-size: large;font-weight: bold;width: 100%;margin-bottom: 5px;">{{ testCase.task_name }}</span> 
                <!-- <mat-card-subtitle>{{  datefunction(testCase.scheduled_start_date)}}</mat-card-subtitle>
                <mat-card-subtitle>{{  datefunction(testCase.scheduled_end_date)}}</mat-card-subtitle> -->
              </mat-card-title>


              <!-- <mat-card-subtitle>{{  }}</mat-card-subtitle> -->
            </mat-card-header>
            <!-- <div> -->
              <span style="font-size: medium;font-family: cursive;margin-left: 20px;color: grey;">  {{  datefunction(testCase.scheduled_start_date)}} to {{  datefunction(testCase.scheduled_end_date)}}  <span style="font-size: small;margin-left: 10px;font-weight: bold;">  ( {{testCase.allocated_hours}}  <span style="font-size: xx-small;font-weight: bold;">Hr</span> )  </span>  </span>
            
            <!-- </div> -->
            <mat-card-content style="margin-left: 30px;">
              <!-- <p>{{  }}</p> -->
              <p [innerHTML]="testCase.description"></p>
              <!-- <p>{{ testCase.test_data }}</p> -->
            </mat-card-content>
            <mat-card-actions style="display: flex;justify-content: space-between;">
<div style="display: flex;align-items: start;justify-items: center;">
  <mat-icon style=" font-size: 20px;margin-top: 3px;">person</mat-icon> {{testCase.employee_name}} 
  <mat-icon style="font-size: 20px;margin-left: 10px;margin-top: 3px;"*ngIf="!reassignemployee" (click)="reassign(testCase.assigned_to)">autorenew</mat-icon>
  <mat-icon  style="font-size: 20px;margin-left: 10px;margin-top: 3px;" (click)="reassignemployee=null" *ngIf="reassignemployee" >undo</mat-icon>
</div>
<mat-form-field *ngIf="reassignemployee" style="width: 50%;max-width: 50%;">
  <mat-label>Reassign To</mat-label>
  <mat-select>
      <mat-option  *ngFor="let data of reassignemployee" [value]="data.employee_id">{{data.first_name}}{{data.last_name}}</mat-option>
  </mat-select>
</mat-form-field>

              </mat-card-actions>
          </mat-card>
        </div>
      </div>    
    </div>
  </mat-drawer>
  <mat-drawer-content>
    <div fxLayout="column"  style="width:100%">
  
      <div fxLayout="row" fxLayoutAlign="center center" fxFlex="100%" style="width:100%;">
        <div fxLayout="column" fxFlex="5%" class="back">
          <mat-icon style="font-size:35px;margin-top: 30px;" (click)="goBack()">keyboard_backspace</mat-icon>
        </div>
        <div fxLayout="column" fxFlex="95%" fxLayoutAlign="center center" style="margin-top: 10px;">
          <h2 class="page-title">{{pageHeading}}</h2>
          
        </div>
      </div>
      <!-- margin-left: 26px;
        width: 20%;
        flex-direction: column;
        box-sizing: border-box;
        display: flex;
        margin-top: 24px; -->
       
      <div fxLayout="row" class="form-container">
          <!-- <div [ngStyle]="{'width': '20%' }"  fxLayout="column">
            <div  style="margin-top: 10px;margin-left: 20px;">
              
               <div style="display: flex; margin-right: 30px;margin-bottom: 20px;">
          <span>Client Name : <span style="font-weight: bold;margin-left: 10px;">{{response?.client_name}}</span></span>
        </div>
            <div style="display: flex; margin-right: 30px;margin-bottom: 20px;">
              <span>Project Id : <span style="font-weight: bold;margin-left: 10px;">{{response?.project_id}}</span></span>
            </div>
            <div style="display: flex; margin-right: 30px;margin-bottom: 20px;">
              <span>Project Name : <span
                style="font-weight: bold;margin-left: 10px;">{{response?.project_name}}</span></span>
            </div>
           
            <div style="display: flex; margin-right: 30px;margin-bottom: 20px;">
              <span>Project Status : <span style="font-weight: bold;margin-left: 10px;">{{response?.status}}</span></span>
            </div>
            </div>
          </div> -->
          <div class="table-container" style="width:99%">
            <div fxLayout="column">
              <div fxFlex="auto">
                <div fxLayout="row">
                  <div [ngStyle]="{'width': '48%' }" fxLayout="column">
                    <div style="margin-top: 10px; margin-left: 20px;">
                      <div style="display: flex; margin-bottom: 2px; font-size: larger; color: black;">
                        <span>
                           <b>Project</b> <span style="font-size: large;color: black;"> > ></span> <span style="font-weight: bold; margin-left: 10px;">{{response?.project_name}}</span>         
                          <span style="margin-left: 10px;">({{response?.project_id}})</span>
                        </span>
                      </div>
                      <div style="display: flex; font-size:medium; color: grey;align-items: baseline;">
                        <span style=" margin-bottom:  -7px;">From {{response?.client_name}}</span>
                        <!-- <span style="margin-left: 10px;">({{response?.status}})</span> -->
                        <span [ngStyle]="{'background-color': response?.status === 'A' ? 'green' : 'red', 'width': '10px', 'height': '10px', 'border-radius': '50%', 'display': 'inline-block', 'margin-right': '5px','margin-left':'5px'}"></span>
    
                      </div>
                      <div style="display: flex; font-size: small; color: grey;">
                        <span>{{response?.startdate}} to {{response?.enddate}}</span>
                      </div>
                    </div>
                  </div>
                  
                  
                  <div fxFlex="1 0 auto">
                    <!-- <app-dynamic-filter  [showdefaultFilter]="showdefaultFilter" (filterValue)=" ' ' "></app-dynamic-filter> -->
                  </div>
                  <!-- <div style="float:right;" fxLayout="column" fxFlex="10%">
                    {{this.listData.length}} Record(s) found
                  </div> -->
                  <div>
                    
                  <div class="add-container">
                    <button mat-raised-button color="primary"
                      (click)="onAddButonClick($event)">
                      <mat-icon>add</mat-icon>
                      Add</button>
                      <!-- <button class="icon" matTooltip="Add" mat-mini-fab (click)="onAddButonClick($event)"
            style="margin-right: 20px; background: #90c0e5;   color: #080201;">
            <mat-icon>add</mat-icon>
          </button> -->
                    </div>
                </div>
              </div>
              
        <!-- [gridOptions]='gridOptions'    [treeData]="true"   [getDataPath]="getTreePath"
         [pagination]="true"  [autoGroupColumnDef]="autoGroupColumnDef"
         [animateRows]="true" [paginationPageSize]="10"
         [groupDefaultExpanded]="groupDefaultExpanded" 
      
      -->
        <!-- [gridOptions]='gridOptions'  -->
      <!-- <div *ngIf="!gridChange"> -->
        <ag-grid-angular 
        style="width: 100%; height: calc(100vh - 250px); flex: 1 1 auto"
        class="ag-theme-alpine"
        [defaultColDef]="defaultColDef"
        [columnDefs]="columnDefs" 
        [rowData]="listData"
        [getDataPath]="getTreePath"
        [autoGroupColumnDef]="autoGroupColumnDef"
        [groupDefaultExpanded]="groupDefaultExpanded" 
        [context]="context"
        [rowSelection]="'single'"
        [components]="components" 
        [paginationPageSize]="10"
        [treeData]="true"
        [pagination]="true"
        [animateRows]="true"
        (cellClicked)='onCellClicked($event)'
        (selectionChanged)="onSelectionChanged($event)"
        (cellValueChanged)="onCellValueChanged($event)"
        (gridReady)="onGridReady($event)" 
        ></ag-grid-angular>
      <!-- </div> -->
      <!-- <div *ngIf="gridChange">
        <ag-grid-angular 
        style="width: 100%; height: calc(100vh - 250px); flex: 1 1 auto"
        class="ag-theme-alpine"
        [defaultColDef]="defaultColDef"
        [columnDefs]="columnDefs" 
        [rowData]="listData"
        [autoGroupColumnDef]="autoGroupColumnDef"
        [groupDefaultExpanded]="groupDefaultExpanded" 
        [gridOptions]='gridOptions' 
        [context]="context"
        [rowSelection]="'single'"
        [components]="components" 
        [paginationPageSize]="10"
        [pagination]="true"
        [animateRows]="true"
        (cellClicked)='onCellClicked($event)'
        (selectionChanged)="onSelectionChanged($event)"
        (cellValueChanged)="onCellValueChanged($event)"
        (gridReady)="onGridReady($event)" 
        ></ag-grid-angular>
      </div>
    -->
    
    
            </div>
          </div>
          </div>
          
          <!-- <div *ngIf="isDataError">
            <mat-icon color="warn" aria-label="Given ID is not valid">error</mat-icon>
            <span>Given ID is not valid</span>
          </div> -->
        </div>
      
    </div>
  </mat-drawer-content>
</mat-drawer-container>








<ng-template #editViewPopup class="example-sidenav" mode="over" style="height: auto" let-data >
  <!-- <div style="text-align-last: end">
    <mat-icon (click)='this.dialogService.closeModal()'>close</mat-icon>
  </div> -->
  <div class="page">
    <mat-card style="width: 98%; margin: auto">
      <div style="text-align-last: end" >
        <mat-icon (click)='this.dialogService.closeModal();this.form.reset()'>close</mat-icon>
      </div>
      <mat-card-header style="flex: 1 1 auto;">
        <div  style="width: 100%">
          <h2 style="text-align: center;" class="page-title">{{ pageHeading }} - {{ formAction }}</h2>
        </div>
      </mat-card-header>
    
      <mat-card-content style="padding-top: 10px">
        <div>
          <form [formGroup]="form">
            <formly-form [model]="model" [fields]="fields" [form]="form"></formly-form>
          </form>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <div style="text-align-last: end; width: 100%">
          <button style="margin: 5px" mat-button (click)='this.dialogService.closeModal();this.form.reset()' >Cancel</button>
          <button style="margin: 5px" mat-button (click)="this.form.reset()" >Reset</button>
          <button style="margin: 5px;  background:rgb(59,146,155)" mat-raised-button color="warn" (click)="saveChild()">
            {{ butText }}
          </button>
        </div>
      </mat-card-actions>
    </mat-card>
    <div >
      <!-- <mat-icon color="warn">error</mat-icon>
      <span>Given ID is not valid</span> -->
    </div>
    
  </div>
</ng-template>
